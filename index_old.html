<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fees Receipt</title>
    <style>
        body { font-family: Arial, sans-serif; background:#f4f4f4; padding:20px; }
        .container { max-width:600px; margin:auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 0 10px rgba(0,0,0,0.1);}        
        h2 { text-align:center; }
        label { display:block; margin-top:10px; }
        input, select { width:100%; padding:8px; margin-top:5px; border-radius:8px; border:1px solid #ccc; }
        .error { border:1px solid red !important; background:#ffe5e5; }
        .btn-row { display:flex; justify-content:space-between; margin-top:10px; }
        button { flex:1; margin:3px; padding:8px; background:black; color:#fff; border:none; border-radius:6px; font-size:12px; cursor:pointer; }
        .receipt { margin-top:30px; padding:20px; background:#fff; border-radius:12px; border:1px solid #ccc; }
        .title { font-size:22px; font-weight:bold; text-align:center; }
        .line { margin:6px 0; }
    </style>
</head>
<body>

<div class="container">
    <div style='text-align:center; margin-bottom:20px;'>
        <h1 style='margin:0; font-size:26px;'>BOMBAY COACHING CLASSES</h1>
        <div style='font-size:14px;'>G101, Ashiyana Complex, Adajan Patiya, Surat</div>
        <div style='font-size:14px;'>Contact: 9819484931</div>
        <hr>
    </div>

    <h2>Fees Receipt</h2>

    <label>Student Name</label>
    <input type="text" id="name" />

    <label>Amount (INR)</label>
    <input type="number" id="amount" />

    <label>Payment For</label>
    <input type="text" id="paymentfor" />

    <label>Std</label>
    <input type="text" id="standard" />

    <label>Mode of Payment</label>
    <select id="mode">
        <option value="Cash">Cash</option>
        <option value="UPI">UPI</option>
        <option value="Bank Transfer">Bank Transfer</option>
        <option value="Cheque">Cheque</option>
    </select>

    <label>Note</label>
    <input type="text" id="note" />

    <div class="btn-row">
        <button onclick="generate()">Generate</button>
        <button onclick="downloadPDF()">PDF</button>
        <button onclick="downloadJPG()">JPG</button>
        <button onclick="printReceipt()">Print</button>
    </div>

    <div id="receipt" class="receipt" style="display:none;"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function generate() {
    let ids = ['name','amount','paymentfor','standard'];
    let ok = true;

    ids.forEach(id=>{
        let el=document.getElementById(id);
        if(!el.value.trim()){ el.classList.add('error'); ok=false; }
        else el.classList.remove('error');
    });

    if(!ok){ alert('Please fill all required fields'); return; }

    let nameVal = document.getElementById('name').value;
    let amountVal = document.getElementById('amount').value;
    let paymentVal = document.getElementById('paymentfor').value;
    let stdVal = document.getElementById('standard').value;
    let noteVal = document.getElementById('note').value;
    let modeVal = document.getElementById('mode').value;

    let dateStr = new Date().toLocaleDateString('en-GB');

    document.getElementById('receipt').style.display = 'block';
    document.getElementById('receipt').innerHTML = `
        <div class='title'>BOMBAY COACHING CLASSES</div>
        <div style='text-align:center;'>G101, Ashiyana Complex, Adajan Patiya, Surat</div>
        <div style='text-align:center;'>Contact: 9819484931</div>
        <hr>
        <div class='line'><b>Date:</b> ${dateStr}</div>
        <div class='line'><b>Student:</b> ${nameVal}</div>
        <div class='line'><b>Standard:</b> ${stdVal}</div>
        <div class='line'><b>Payment For:</b> ${paymentVal}</div>
        <div class='line'><b>Amount:</b> INR ${amountVal}</div>
        <div class='line'><b>Mode of Payment:</b> ${modeVal}</div>
        <div class='line'><b>Note:</b> ${noteVal}</div>
        <br><b>Thank you!</b>
    `;
}

function downloadJPG() {
    let receipt = document.getElementById('receipt');
    if(receipt.style.display==='none'){ alert('Generate first'); return; }
    html2canvas(receipt).then(canvas=>{
        let a=document.createElement('a');
        a.download = document.getElementById('name').value + '_' + document.getElementById('paymentfor').value + '.jpg';
        a.href = canvas.toDataURL('image/jpeg');
        a.click();
    });
}

function downloadPDF() {
    let receipt=document.getElementById('receipt');
    if(receipt.style.display==='none'){ alert('Generate first'); return; }

    html2canvas(receipt).then(canvas=>{
        const img = canvas.toDataURL('image/png');
        const pdf = new jspdf.jsPDF('p','pt','a4');
        const width = pdf.internal.pageSize.getWidth();
        const ratio = canvas.height / canvas.width;
        pdf.addImage(img,'PNG',20,20,width-40,(width-40)*ratio);
        pdf.save(document.getElementById('name').value + '_' + document.getElementById('paymentfor').value + '.pdf');
    });
}

function printReceipt(){
    let receipt=document.getElementById('receipt');
    if(receipt.style.display==='none'){ alert('Generate first'); return; }
    let w=window.open('','_blank');
    w.document.write(`<html><body>${receipt.outerHTML}</body></html>`);
    w.document.close(); w.print(); w.close();
}
</script>
</body>
</html>
